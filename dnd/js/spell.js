const pages = [
  `   <div>
          <img id="title-image" src="../pic/spells-title.png" alt="Spells Title">
      </div>

      <p>D&D世界中到处都是魔法，而其最常见的形式就是法术。本章主要介绍各种法术的施法规则。不同职业的角色以不同的方法学习和准备法术，而怪物们也有其独特的法术用法。但各种不同源头的法术都遵循此处所介绍的规则的规则。</p>
      <h1>法术是什么</h1>
      <p>一项法术是一个独立的魔法效应，是一次对多元宇宙中所弥漫的魔法能量进行重塑操作，最后以特定的方式在特定的区域进行具现的过程。施展某个法术时，施法者会谨慎的将不可见却无处不在的原生魔力拨起，将其交织固定成型并使之以特定的方式震荡回转，再释放出来以达成预计的效应——而这一切通常只发生于数秒之间。
          <br>法术可以作为一种便利的工具，武器或是防护结界。它们可以制造或抚平伤害，也可以产生或消除特定的状态，甚至还可以汲取或赋予生命力量。
      </p>

      <h1>法术环阶</h1>
      <p>每项法术都属于0至9环其中一阶。法术的环阶大致指示了它的强度，低阶（但依然神奇）的法术里有1环的魔法飞弹，而高阶法术里则有惊天动地的9环祈愿术。0环戏法是一种简便到几乎只靠默念就可以施展的强大法术。施展高环阶法术时，施法者本身也必须具有较高的施法者等级。</p>
      <p>法术的环阶跟角色的等级不是简单的对等关系。展施9环法术时，通常需要其角色至少为17级，而非9级。</p>
      
      <h1>已知法术和准备法术</h1>
      <p>在施法者能用某项法术前，他必须先将这项法术铭刻在其意识里，或者必须将该法术的力量储存在一个魔法物品中。某些职业的角色（如吟游诗人和术士）只拥有一个有限的已知法术列表，但其中的法术可以一直被铭记在其意识中。同样的模式，也使用于很多使用魔法的怪物。而另一些施法者（如牧师和法师）则需要先进行准备法术的程序。该程序每一职业都有所不同，其具体细节会在相应的职业描述中说明。
        <br>无论如何，施法者可以铭记的法术是有限的，而其数量会随角色的等级而增加。
      </p>
      `,

`
<h1>法术位</h1>
<p>不论施法者已知或准备了多少法术，他都只能施展有限的法术，然后就需要靠休息来恢复其施法能力。哪怕施展最简单的法术，操控魔网并引导魔力的过程都会对其身心带来负担，而施展高环阶法术时其消耗则更为严重。因此，每种施法职业的描述都会包含一个列表（邪术师除外），列明角色在特定等级所拥有的每个环阶法术位数量。例如，3级法师 乌玛拉Umara具有四枚1环法术位和两枚2环法术位。</p>
<p>不论施法者已知或准备了多少法术，他都只能施展有限的法术，然后就需要靠休息来恢复其施法能力。哪怕施展最简单的法术，操控魔网并引导魔力的过程都会对其身心带来负担，而施展高环阶法术时其消耗则更为严重。因此，每种施法职业的描述都会包含一个列表（邪术师除外），列明角色在特定等级所拥有的每个环阶法术位数量。例如，3级法师 乌玛拉Umara具有四枚1环法术位和两枚2环法术位。而完成一次长休可以恢复所有已耗用的法术位</p>
<p>当施法者用比法术本身环阶更高的法术位施展法术时，所施展的法术将被视为一个更高环阶的法术。例如，假设乌玛拉用其2环法术位施展法术魔法飞弹，则放出来的魔法飞弹是一个2环法术。形象上相当于，该法术自行扩大了效应以匹配施法者为其安排的法术位。
  <br>某些法术（诸如魔法飞弹 和疗伤术）在升环施法时会有更强的效应，其细节则会在相应的法术描述中进行说明。
</p>
<p><span class="extra-bold">戏法Cantrips</span>：戏法是可以随意施展的法术，它不消耗法术位也不需要预先准备。施法者多次重覆的练习已经将这些法术铭记在其意识里，并灌注了足以重复施展的魔力。戏法属于0环法术。</p>
<p><span class="extra-bold">仪式Rituals</span>：某些特定的法术带有一项特殊的标签：仪式。这些特殊的法术除了以正常方式施放之外，还可以用以进行仪式施法。仪式施法的施法时间会比相应法术正常施法时间长10分钟。而仪式施法时并不需要消耗法术位，这也意味着以仪式施展的法术不能进行升环施法。
  <br>进行仪式施法的施法者必须具有仪式施法的相应能力或特性（比如牧师和德鲁伊的相应特性所述）。该法术还必须处在施法者的准备法术列表或已知法术列表中，除非该角色的仪式施法特性另有指定（比如法师的相应特性所述）。
</p>
<p><span class="extra-bold">施法时间Casting Time</span>：大部分法术的施展时间只算作一个动作，而有的法术则需要执行一个附赠动作，一个反应或是需要更长的施法时间。</p>
<p><span class="extra-bold">施法距离Range</span>：法术的目标必须在法术的施法距离内。对于如魔法飞弹 一类的法术，其目标是一个生物。而对于火球术 一类的法术，其目标则是火球爆开时所处空间的那一点。
  <br>大多数法术的施法距离以尺作度量。某些法术只能以你触及范围内的生物作为目标（包括你自身）。还有些法术只影响施术者本身（比如护盾术），这些法术的施法距离即为自身。
</p>
<p><span class="extra-bold">持续时间Duration</span>：法术的持续时间即是法术生效的时间长短。一个法术的持续时间可以用轮、分钟、小时、甚至年月来度量。某些特定法术的效应甚至会一直持续至该法术被解除或被破坏。</p>
`,
`
  许多法术都是立即的。它们会以某种方式瞬间造成伤害、治疗、创造、或改变某个生物或物件。由于其魔法只存在于一瞬间，因此其产生的后果无法在事后被解除。
  <br>某些法术需要你保持<span class="extra-bold">专注Concentration</span>才能保持其魔力的激活。如果你失去了专注，法术也将随即终结。需要专注的法术会在其持续时间条目中说明，同时还会指明为其保持专注情况下法术能持续时间的上限。你可以随时终止你的专注（无需动作）。
  <br>常规的活动——例如移动或攻击——并不会影响你的专注，可以打断你专注的因素如下：
  <br><br><b>施展另一个需要专注的法术。</b>当你施展另一个需要专注的法术时，你失去原来的专注。也就是说，你不能同时为两个法术进行专注。
  <br><br><b>受到伤害。</b>如果在你专注于法术期间受到了伤害，你必须通过一次体质豁免来维持自己的专注。该豁免DC为10或你所受伤害值的一半，以两者中较高值为准。如果你同时从多个不同的来源处受到了伤害（例如箭矢与龙的吐息），你必须分别为每个不同来源的伤害各投一次豁免。
  <br><br><b>失能或被杀。</b>当你陷入失能状态或死亡时，也会失去当前的专注。
  <br>DM也可以判定你的专注会被某些特定的情况干扰。例如你被暴风雨中掩面而来的巨浪击退时，DM可以要求你进行一次DC10的体质豁免，以维持你的专注不中断。

  <p><span class="extra-bold">攻击检定Attack Rolls</span>：某些法术会要求施法者进行攻击检定来决定法术是否有命中指定的目标。你进行法术攻击的攻击加值等于你的施法属性调整值+你的熟练加值。大多数需要攻击检定的法术属于远程攻击。其同样要遵守你在敌对生物的5尺范围内进行远程攻击时所具有的劣势减益，前提是该生物必须能看见你且其本身不处于失能状态。</p>

`
];

window.addEventListener('DOMContentLoaded', function () {

  //音乐播放
      const audio = document.getElementById("bgm");

    // 先解除静音
    audio.muted = false;

    // 尝试播放
    const playPromise = audio.play();

    if (playPromise !== undefined) {
      playPromise
        .then(() => {
          console.log("BGM 正常自动播放");
        })
        .catch(error => {
          console.warn("自动播放失败，可能需要用户交互触发播放：", error);
        });
    }

});

let currentPage = 0;
const container = document.getElementById('text-container');
const prevButton = document.getElementById('prev-button');
const nextButton = document.getElementById('next-button');

function showPage(index) {
  container.style.opacity = 0; // 淡出
  setTimeout(() => {
    container.innerHTML = pages[index];
    container.style.opacity = 1; // 淡入
  }, 300);
}

// 初始显示第一页
showPage(currentPage);

// 点击上一页
prevButton.addEventListener('click', () => {
  if (currentPage > 0) {
    currentPage--;
    showPage(currentPage);
  }
});

// 点击下一页
nextButton.addEventListener('click', () => {
  if (currentPage < pages.length - 1) {
    currentPage++;
    showPage(currentPage);
  }
});
